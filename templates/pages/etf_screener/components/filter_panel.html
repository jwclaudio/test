<div class="filter-panel" role="region" aria-label="ETF Filters">
    <div class="filter-header">
        <h3>Filters</h3>
        <button class="reset-filters" aria-label="Reset all filters">
            <i class="fas fa-undo"></i>
            Reset All
        </button>
    </div>
    
    <form id="filter-form" onsubmit="return false;">
        <!-- Asset Class Filter -->
        <div class="filter-section" role="group" aria-labelledby="asset-class-label">
            <h4 id="asset-class-label">Asset Class</h4>
            <div class="filter-options">
                <label class="filter-option">
                    <input type="checkbox" name="asset-class" value="equity" aria-label="Equity ETFs">
                    <span>Equity</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="asset-class" value="tech" aria-label="Technology ETFs">
                    <span>Technology</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="asset-class" value="fixed-income" aria-label="Fixed Income ETFs">
                    <span>Fixed Income</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="asset-class" value="international" aria-label="International ETFs">
                    <span>International</span>
                </label>
            </div>
        </div>

        <!-- Region Filter -->
        <div class="filter-section" role="group" aria-labelledby="region-label">
            <h4 id="region-label">Region</h4>
            <div class="filter-options">
                <label class="filter-option">
                    <input type="checkbox" name="region" value="us" aria-label="US ETFs">
                    <span>United States</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" name="region" value="international" aria-label="International ETFs">
                    <span>International</span>
                </label>
            </div>
        </div>

        <!-- Expense Ratio Filter -->
        <div class="filter-section" role="group" aria-labelledby="expense-ratio-label">
            <h4 id="expense-ratio-label">Expense Ratio (%)</h4>
            <div class="range-inputs">
                <input type="number" 
                       class="range-input" 
                       placeholder="Min" 
                       min="0" 
                       max="5" 
                       step="0.01"
                       aria-label="Minimum expense ratio">
                <span>to</span>
                <input type="number" 
                       class="range-input" 
                       placeholder="Max" 
                       min="0" 
                       max="5" 
                       step="0.01"
                       aria-label="Maximum expense ratio">
            </div>
            <div class="range-labels">
                <span>0%</span>
                <span>5%</span>
            </div>
        </div>

        <!-- AUM Filter -->
        <div class="filter-section" role="group" aria-labelledby="aum-label">
            <h4 id="aum-label">Assets Under Management</h4>
            <div class="range-inputs">
                <input type="number" 
                       class="range-input" 
                       placeholder="Min" 
                       min="0" 
                       step="0.1"
                       aria-label="Minimum AUM in billions">
                <span>B</span>
                <input type="number" 
                       class="range-input" 
                       placeholder="Max" 
                       min="0" 
                       step="0.1"
                       aria-label="Maximum AUM in billions">
            </div>
            <div class="range-labels">
                <span>0B</span>
                <span>1000B</span>
            </div>
        </div>

        <!-- Active Filters Indicator -->
        <div class="active-filters" aria-live="polite">
            <span class="active-filters-count"></span>
        </div>
    </form>
</div>

<style>
    .filter-panel {
        background: #ffffff;
        border-radius: 12px;
        padding: 1.5rem;
        height: fit-content;
        position: sticky;
        top: 2rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .filter-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .filter-header h3 {
        margin: 0;
        color: #000000;
        font-size: 1.2rem;
        font-weight: 600;
    }

    .reset-filters {
        background: none;
        border: none;
        color: #3b82f6;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        padding: 0.5rem;
        border-radius: 6px;
        transition: all 0.3s ease;
    }

    .reset-filters:hover {
        background: rgba(59, 130, 246, 0.1);
    }

    .filter-section {
        margin-bottom: 1.5rem;
        padding: 1rem;
        border-radius: 8px;
        background: #ffffff;
        transition: all 0.3s ease;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .filter-section:hover {
        background: #f1f5f9;
        border-color: rgba(0, 0, 0, 0.1);
    }

    .filter-section h4 {
        margin: 0 0 1rem;
        color: #000000;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
    }

    .filter-options {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .filter-option {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
        color: #000000;
        font-size: 0.9rem;
        padding: 0.5rem;
        border-radius: 6px;
        transition: all 0.3s ease;
    }

    .filter-option:hover {
        background: rgba(59, 130, 246, 0.1);
    }

    .filter-option input[type="checkbox"] {
        width: 16px;
        height: 16px;
        border-radius: 4px;
        border: 2px solid #e2e8f0;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .filter-option input[type="checkbox"]:checked {
        background: #3b82f6;
        border-color: #3b82f6;
    }

    .range-inputs {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 0.5rem;
        align-items: center;
        margin-bottom: 0.5rem;
    }

    .range-input {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        background: #ffffff;
        color: #000000;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .range-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .range-input:invalid {
        border-color: #ef4444;
    }

    .range-input::placeholder {
        color: #000000;
        opacity: 0.5;
    }

    .range-labels {
        display: flex;
        justify-content: space-between;
        color: #64748b;
        font-size: 0.8rem;
    }

    .active-filters {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .active-filters-count {
        font-size: 0.9rem;
        color: #64748b;
    }

    @media (max-width: 768px) {
        .filter-panel {
            position: static;
            margin-bottom: 2rem;
        }
    }
</style>

<script>
    class FilterPanel {
        constructor() {
            this.form = document.getElementById('filter-form');
            this.resetButton = document.querySelector('.reset-filters');
            this.setupEventListeners();
        }

        setupEventListeners() {
            this.resetButton.addEventListener('click', () => this.resetFilters());
            this.form.addEventListener('change', () => this.updateActiveFilters());
        }

        resetFilters() {
            this.form.reset();
            this.updateActiveFilters();
        }

        updateActiveFilters() {
            const activeFilters = this.getActiveFilters();
            const countElement = document.querySelector('.active-filters-count');
            countElement.textContent = `${activeFilters.length} active filter${activeFilters.length !== 1 ? 's' : ''}`;
        }

        getActiveFilters() {
            const activeFilters = [];
            const checkboxes = this.form.querySelectorAll('input[type="checkbox"]:checked');
            const rangeInputs = this.form.querySelectorAll('.range-input');

            checkboxes.forEach(checkbox => {
                activeFilters.push(checkbox.name);
            });

            rangeInputs.forEach(input => {
                if (input.value) {
                    activeFilters.push(input.name);
                }
            });

            return activeFilters;
        }
    }

    // Initialize the filter panel
    document.addEventListener('DOMContentLoaded', () => {
        window.filterPanel = new FilterPanel();
    });
</script> 